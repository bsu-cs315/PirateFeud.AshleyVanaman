extends Node2D


# Declare member variables here. Examples:
# var a = 2
# var b = "text"


# Called when the node enters the scene tree for the first time.
func _ready():
	spawn_cannon()
	spawn_ship()
	# Replace with function body.


# Called every frame. 'delta' is the elapsed time since the previous frame.
#func _process(delta):
#	pass
func _process(delta):
	if Input.is_action_just_pressed("Restart"):
		restart()
		
func spawn_cannon():
	var cannon : RigidBody2D = load("res://Cannon/Cannon.tscn").instance()
	cannon.position = Vector2(60,460)
	call_deferred("add_child", cannon)
	
func spawn_ship():
	var ship : Area2D = load("res://Enemy/EnemyShip.tscn").instance()
	var connect = ship.connect("body_entered", self, "ship_sink", [ship])
	ship.position = Vector2(930, 315)
	call_deferred("add_child, ship")
	
func ship_sink(cannon, ship):
	if cannon == $Cannon:
		call_deferred("remove_child", ship)
		print("Enemy ship was sunk!")
		
func restart():
	var restart_game = get_tree().change_scene("res://Sea/Sea.tscn")
